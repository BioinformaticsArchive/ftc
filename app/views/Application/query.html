*{Get the header}*
#{extends 'main.html' /}
#{set title:'OWL Query' /}

*{Get the JS to toggle + or - boxes}*
#{script 'toggle.js' /}

*{If errors, show them as well as the form}*
#{if flash.error}
	#{query_input /}
	<div id="errors" style="color: red;">
		${flash.error.raw()}
	</div>
#{/if}

#{if result != null}
<h3 id="owl-query">Query: <code>${result.query}</code></h3>
<nav class="block-information">
    <h2><span class="togglable">[-] </span>
    <span class="togglable" style="display: none">[+] </span>
    Equivalent class${result.equivalentClasses.size().pluralize('es')}<span class="numbers"> (${result.equivalentClasses.size()})</span></h2>
    
    #{if result.equivalentClasses.size() == 0}
    	<p>No equivalent classes.</p>
    #{/if}
    #{else}
        <ul>
		#{list items:result.equivalentClasses, as:'key' }
			#{if result.typeMap.get(key).equals("ftc")}
				#{ftcClass key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("protein")}
				#{protein key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("drugbank")}
				#{drugbank key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("go")}
				#{go key:key, value:result.labelMap.get(key) /}
			#{/if}
		#{/list}
      </ul>
     #{/else}
</nav>

<nav class="block-information">
    <h2><span class="togglable">[-] </span>
    <span class="togglable" style="display: none">[+] </span>
    Subclass${result.subClasses.size().pluralize('es')}<span class="numbers"> (${result.subClasses.size()})</span></h2>
    
    #{if result.subClasses.size() == 0}
    	<p>No subclasses.</p>
    #{/if}
    #{else}
        <ul>
		#{list items:result.subClasses, as:'key' }
			#{if result.typeMap.get(key).equals("ftc")}
				#{ftcClass key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("protein")}
				#{protein key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("drugbank")}
				#{drugbank key:key, value:result.labelMap.get(key) /}
			#{/if}
			
			#{if result.typeMap.get(key).equals("go")}
				#{go key:key, value:result.labelMap.get(key) /}
			#{/if}
		#{/list}
      </ul>
     #{/else}
</nav>

#{/if}