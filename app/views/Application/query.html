#{extends 'main.html' /}
#{set title:'Search results' /}

//TODO better error checking

<script type="text/javascript">
$(document).ready(function() {
	$('#input-owl-query').change(function() {
  		console.log('Change!');
  		var input_query = $(this).val();
  		console.log(input_query);
  		
  		$.ajax({
        	url: "/checker/" + input_query,
        	type: "GET",
        	// callback handler that will be called on success
        	success: function(response, textStatus, jqXHR){
          	  $('#errors').text(response);
     	   },
       		 // callback handler that will be called on error
       		error: function(jqXHR, textStatus, errorThrown){
          	  // log the error to the console
          	  console.log(
                "The following error occured: "+
                textStatus, errorThrown
          	  );
        	},
    	});
	});
});
</script>

<form action="@{Application.owlQuery()}" method="POST">
	<fieldset>
	<legend>OWL Query</legend>
   		<input id="input-owl-query" type="text" name="query" value="${query}"/ size="70"> 
    	<input type="submit" value="Search" />
    </fieldset>
</form>

<div id="errors" style="background-color: orange; margin-top: 20px">No errors</div>