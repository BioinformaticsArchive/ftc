#{extends 'main.html' /}
#{set title:ftcClass.ftcId + ' - ' + ftcClass.label /}

#{script 'showMore.js' /}
#{script 'jquery.poshytip.min.js' /}
#{script 'help.js' /}

<div itemscope itemtype="http://schema.org/DrugClass">

<div id="class-title" class="page-header">
	<h1><span id="classId" class="classTitle label label-primary">${ftcClass.ftcId}</span><span itemprop="name">
	<small> ${ftcClass.label}</small></span>
	</h1>
</div>


<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">
    <span class="glyphicon glyphicon-chevron-right"></span> Definition</h3>
  </div>
  <div class="panel-body">
    <span itemprop="description">${ftcClass.comment.raw()}</span>
  </div>
</div>

#{if directAgents.size() > 0}
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading"><h3 class="panel-title">
  <span class="glyphicon glyphicon-chevron-right"></span> 
 Direct Agents<span class="numbers"> (<span id="currentNumbermoreDirectAgents">${directAgents.size()}</span> 
    of <span id="totalNumbermoreDirectAgents">${ftcClass.directAgents.size()})</span></span>
    <span title="<strong>The therapeutic agents that might act as ${ftcClass.label} (computer generated hypothesis).</strong>
    These compounds are direct children of the category ${ftcClass.label}, 
    they are therefore marked as <i>direct</i>." class="help-text">(?)</span>

</h3></div>
<table class="table table-hover table-condensed">
	<thead>
		<tr>
			<th>DrugBank identifier</th>
			<th>label</th>
		</tr>
	</thead>
	<tbody>
        #{list items:directAgents, as:'directAgent' }
        <tr itemprop="drug" itemscope itemtype="http://schema.org/Drug">
        <td><a href="@{Application.agent(directAgent.drugBankId)}">${directAgent.drugBankId}</a></td>
        <td><span itemprop="name">${directAgent.label}</span></td>
        </tr>
        #{/list}
	</tbody>
</table>
      #{if directAgents.size() < ftcClass.directAgents.size()}
      <div class="panel-footer">
      <div class="showMore" id="moreDirectAgents">
      <img style="display: none;" src="@{'/public/images/ajax-loader.gif'}">
      <span class="textShowMore"><span class="glyphicon glyphicon-plus"></span> Show more</span></div>
      </div>
      #{/if}
</div>
#{/if}

#{if indirectAgents.size() > 0}


<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading"><h3 class="panel-title">
  <span class="glyphicon glyphicon-chevron-right"></span> 
 Indirect Agents<span class="numbers"> (<span id="currentNumbermoreIndirectAgents">${indirectAgents.size()}</span> 
    of <span id="totalNumbermoreIndirectAgents">${ftcClass.indirectAgents.size()})</span>
    <span title="<strong>The therapeutic agents that might act as ${ftcClass.label} (computer generated hypothesis).</strong>
    These compounds are not direct children of the category ${ftcClass.label}, 
    they are therefore marked as <i>indirect</i> (dashed border)." class="help-text">(?)</span>

</h3></div>
<table class="table table-hover table-condensed">
	<thead>
		<tr>
			<th>DrugBank identifier</th>
			<th>label</th>
		</tr>
	</thead>
	<tbody>
        #{list items:indirectAgents, as:'indirectAgent' }
        <tr itemprop="drug" itemscope itemtype="http://schema.org/Drug">
        <td><a href="@{Application.agent(directAgent.drugBankId)}">${indirectAgent.drugBankId}</a></td>
        <td><span itemprop="name">${indirectAgent.label}</span></td>
        </tr>
        #{/list}
	</tbody>
</table>
      #{if indirectAgents.size() < ftcClass.indirectAgents.size()}
      <div class="panel-footer">
      <div class="showMore" id="moreDirectAgents">
      <img style="display: none;" src="@{'/public/images/ajax-loader.gif'}">
      <span class="textShowMore"><span class="glyphicon glyphicon-plus"></span> Show more</span></div>
      </div>
      #{/if}
</div>
#{/if}

#{if superClasses.size() > 0}
<nav class="class-info block-information moreSuperclassesWrap">
    <h2>
    <span class="togglable">[-] </span>
    <span class="togglable" style="display: none">[+] </span>
    &uarr; Super class${superClasses.size().pluralize('es')}
    <span class="numbers"> (<span id="currentNumbermoreSuperclasses">${superClasses.size()}</span> 
    of <span id="totalNumbermoreSuperclasses">${ftcClass.superClasses.size()})</span>
    <span title="<strong>The direct parents (super classes) to the current category.</strong> The super classes
    define increasingly more generic concepts. Text in bold indicates that the super class contains some
    therapeutic agents." class="help-text">(?)</span>
    </h2>
    <div id="members">
      <ul>
        #{list items:superClasses, as:'superClass' }
        <a href="@{Application.classVisu(superClass.ftcId)}">
        	<li class="transition direct #{if superClass.hasDrug}has-drug#{/if}">
        	${superClass.ftcId} - ${superClass.label}</li>
        </a>
        #{/list}
      </ul>
      #{if superClasses.size() < ftcClass.superClasses.size()}
      <div class="showMore" id="moreSuperclasses">
      <img style="display: none;" src="@{'/public/images/ajax-loader.gif'}">
      <span class="textShowMore">Show more</span></div>
      #{/if}
      </div>
</nav>
#{/if}

#{if subClasses.size() > 0}
<nav class="class-info block-information moreSubclassesWrap">
    <h2>
    <span class="togglable">[-] </span>
    <span class="togglable" style="display: none">[+] </span>
    &darr; Subclass${subClasses.size().pluralize('es')}<span class="numbers"> (<span id="currentNumbermoreSubclasses">${subClasses.size()}</span> 
    of <span id="totalNumbermoreSubclasses">${ftcClass.subClasses.size()})</span>
    <span title="<strong>The direct children (subclasses) to the current category.</strong> The subclasses
    define increasingly more specific concepts. Text in bold indicates that the subclass contains some
    therapeutic agents." class="help-text">(?)</span>
    </h2>
    <div id="members">
      <ul>
        #{list items:subClasses, as:'subClass' }
        
        <a href="@{Application.classVisu(subClass.ftcId)}">
        	<li class="transition direct #{if subClass.hasDrug}has-drug#{/if}">
        	${subClass.ftcId} - ${subClass.label}</li>
        </a>
        #{/list}
      </ul>
      #{if subClasses.size() < ftcClass.subClasses.size()}
      <div class="showMore" id="moreSubclasses">
      <img style="display: none;" src="@{'/public/images/ajax-loader.gif'}">
      <span class="textShowMore">Show more</span></div>
      #{/if}
      </div>
</nav>
#{/if}

#{if !ftcClass.ftcId.equals("FTC_C1")}
<nav class="block-information">
<h2>Taxonomic Tree (<a style="text-decoration: underline;" href="@{Application.map(ftcClass.ftcId)}">explore map</a>)
  <span title="Tree representation of the super classes of the current category. You can zoom and pan the tree by clicking the
  <i>explore map</i> link" class="help-text">(?)</span>
</h2>
<div id="svg-wraper" style="width: ${ratioSvg}">
	${ftcClass.svgGraph.raw()}
</div>
</nav>
#{/if}

</div>